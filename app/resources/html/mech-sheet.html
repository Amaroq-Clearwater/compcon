<script id="mech-info-template" type="text/template">
  <div style="padding: 5px;">
    <span class="mech-name">{{allCaps name}}</span>
    <a href=#>
      <span id="shell-info-btn" data-modal="shellInfoModal"class="big-subtitle btn">{{allCaps shell.name}}</span>
    </a>
  </div>
  <table width=100%>
    <td width=50% style="vertical-align: top; padding-left: 5px;">
      <div><span id="ips-n" class="manufacturer">{{longSource shell.source}}</span></div>
      <div class="mech-type">{{shell.mechtype}} Mech</div>
      <div class="license-block-header">LICENSES REQUIRED:</div>
      
      {{#licenses}}
        {{#if locked}}
          <div class="license-block-locked warning-stripes " style="padding-left: 10px;">
            <a href="#" data-balloon-length="large" data-balloon="{{{items}}}" data-balloon-pos="right">
              <img src="./resources/icons/locked.svg" height=20>
              <span>{{source}} {{allCaps name}} {{level}}</span><span class="subtitle">(LICENSE REQUIRED)</span>
            </a>
          </div>         
        {{else}}
          <div class="license-block"style="padding-left: 10px;">
            <a href="#" data-balloon-length="large" data-balloon="{{{items}}}" data-balloon-pos="right">
              <img src="./resources/icons/rank-{{ifElse level source}}.svg" height=20> 
              <span>{{source}} {{allCaps name}} {{level}}</span>
            </a>
          </div>
        {{/if}}
      {{/licenses}}

      <br>
      <div class="license-block-header">PILOT'S NOTES:</div>
      {{#if notes}}<blockquote>{{{notes}}}</blockquote>{{/if}}
    </td>
    {{#if img}}<td><img class="block-img" src="./resources/img/mecha/{{img}}" height=400><span class="pull-right subtitle">Size {{shell.size}}</span></td>{{/if}}
  </table>
</script>

<script id="mech-stats-template" type="text/template">
  <div class="statbox">
    <table class="mech-table">
      <td width="10%">
        <div class="hase-title">HULL</div>
        <img class="hexagon" src="./resources/icons/hex.svg">
        <span class="hase-num">{{plusMinus hull}}</span>

        <div class="hase-title">AGI</div>
        <img class="hexagon" src="./resources/icons/hex.svg">
        <span class="hase-num">{{plusMinus agi}}</span>

        <div class="hase-title">SYS</div>
        <img class="hexagon" src="./resources/icons/hex.svg">
        <span class="hase-num">{{plusMinus sys}}</span>

        <div class="hase-title">ENG</div>
        <img class="hexagon" src="./resources/icons/hex.svg">
        <span class="hase-num">{{plusMinus eng}}</span>
      </td>
      <td width="90%" align="left">
      <br>
        <div style="margin-left:25px;">
          <div>
            <span class="subtitle">&emsp;STRUCTURE:<b>{{structure}}</b> // HP:<b>{{hp}}</b> // ARMOR:<b>{{armor}}</b></span>
          </div>
          {{#repeat structure}}<div class="pip-box structure"></div>{{/repeat}}
          {{#repeat hp}}<div class="pip-box hp"></div>{{/repeat}}
          {{#repeat armor}}<div class="pip-box armor"></div>{{/repeat}}
          <div class="exp-text" style="margin-left: -20px;">
            <b>10</b> (Base HP) 
            <b>{{plusMinus hp_core_bonus}}</b> (CORE Bonus) 
            <b>{{plusMinus hp_level_bonus}}</b> (Level Bonus) 
            <b>{{plusMinus hp_hull_bonus}}</b> (HULL Bonus)
          </div>
          <div style="display: inline-block">
            <div style="padding-top: 5px">
              <span class="subtitle">&emsp;STRESS THRESHOLD:<b>{{stress}}</b> // HEAT CAP:<b>{{heatcap}}</b></span>
            </div>
            {{#repeat stress}}<div class="pip-box stress"></div>{{/repeat}}
            {{#repeat heatcap}}<div class="pip-box heatcap"></div>{{/repeat}}
          </div>
          <div style="display: inline-block; padding-left: 60px;">
            <div style="padding-top: 5px"><span class="subtitle">&emsp;OVERCHARGE: <b>{{overcharge_active}}</b></span></div>
            {{#repeat overcharge_active}}<div class="pip-box overcharge oc-on"></div>{{/repeat}}
            {{#repeat overcharge_remaining}}<div class="pip-box overcharge"></div>{{/repeat}}
          </div>
          <div class="exp-text" style="margin-left: -20px;">
            <b>6</b> (Base Heat Capacity) <b>{{heat_eng_bonus}}</b> (ENG Bonus)
          </div>
        <br>
          <div>
            <table class="mech-table">
              <tr>
                <th width="16.66%">SPEED</th>
                <th width="16.66%">EVASION</th>
                <th width="16.66%">E-DEFENSE</th>
                <th width="16.66%">REPAIR CAP</th>
                <th width="16.66%">TARGETING</th>
              </tr>
              <tr>
                <td class="hase-num">{{speed}}</td>
                <td class="hase-num">{{evasion}}</td>
                <td class="hase-num">{{edef}}</td>
                <td class="hase-num">{{repcap}}</td>
                <td class="hase-num">{{plusMinus targeting}}</td>
              </tr>
              <tr>
                <td class="exp-text"><b>3</b> (Base) <b>{{plusMinus speed_agi_bonus}}</b> (AGI Bonus)</td>
                <td class="exp-text"><b>8</b> (Base) <b>{{plusMinus evasion_agi_bonus}}</b> (AGI Bonus)</td>
                <td class="exp-text"><b>8</b> (Base) <b>{{plusMinus edef_sys_bonus}}</b> (SYS Bonus)</td>
                <td class="exp-text"><b>6</b> (Base) <b>{{plusMinus repcap_eng_bonus}}</b> (ENG Bonus)</td>
                <td class="exp-text"><b>{{plusMinus targeting_eng_bonus}}</b> (SYS Bonus)</td>
              </tr>
              <tr>
                <td>&nbsp;</td>
              </tr>
              <tr>
                <td>&nbsp;</td>
              </tr>
              <tr>
                <th>SYSTEM POINTS</th>
                <td></td>
                <td></td>
                <th>GRAPPLE</th>
                <th>RAM</th>
              </tr>
              <tr>
                <td class="hase-num">{{max_sp}}</td>
                <td></td>
                <td></td>
                <td class="hase-num">{{plusMinus grapple}}</td>
                <td class="hase-num">{{plusMinus ram}}</td>
              </tr>
                <td class="exp-text"><b>{{sp_shell}}</b> (SHELL) <b>{{plusMinus sp_core_bonus}}</b> (CORE Bonus)</td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
              </tr>
            </table>
        </div>
      </td>
    </table>
  </div>
</script>

<script id="mech-gear-template" type="text/template">
  <div style="padding: 10px;">
    <span class="title">LOADOUT</span>
    <table class="equipment-table">
      {{#weapons}}
      <tr>
        <td width="20%">
          <a href=#>
            <div class="btn mount-btn">{{allCaps mount}} MOUNT</div>
          </a>
        </td>
        <td class="menu-border equip-expander">
          <a href=#>
            <div class="equip-expander-header sweep-btn">&nbsp;{{name}}
              <span class="subtitle">({{source}})</span>
              {{#if sp}}<span class="pull-right subtitle">{{sp}} SP</span>{{/if}}
            </div>
          </a>
          <div class="equip-open-info hidden">
            <div style="padding-left:5px">
              {{#if description}}<blockquote class="desc-text">{{{description}}}</blockquote>{{/if}}
              {{#if effect}}<span>{{{effect}}}<br></span>{{/if}}
              <span class="subtitle">{{mount}} {{type}}</span>
              {{#if sp}}<span>{{sp}} SP <span class="subtitle">{{/if}}
              <table class="gear-table">
                <tr><th>Range</th><th>Damage</th>
                <tr><td>{{range}}</td><td>{{{dmgFormat damage}}}<br><span class="subtitle">{{dmgRange damage}}</span></td>
              </table>
              <div class="tag-div">
                {{#tags}}
                  <div class="tag">
                    <a href="#" data-balloon-length="{{balloonSize description}}" data-balloon="{{description}}" data-balloon-pos="up">{{name}}</a>
                  </div>
                {{/tags}}
              </div>
            </div>
          </div>
        </td>
      </tr>
      {{/weapons}}
      <tr>
        <td width="20%"><a href=#>
            <div class="btn mount-btn warning-stripes">ULTIMATE - PASSIVE</div>
          </a></td>
        <td class="menu-border equip-expander">
          <a href=#>
            <div class="equip-expander-header sweep-btn">&nbsp;{{shell.ult_name}}</div>
          </a>
          <div class="equip-open-info hidden">
            <div style="padding-left:5px">
            {{#if shell.ult_description}}
              <blockquote class="desc-text">{{{shell.ult_description}}}</blockquote>
            {{/if}}
              <span>{{{shell.ult_passive}}}</span>
            </div>
          </div>
        </td>
      </tr>
      <tr>
        <td width="20%"><a href=#>
            <div class="btn mount-btn warning-stripes">ULTIMATE - ACTIVE</div>
          </a></td>
        <td class="menu-border equip-expander">
          <a href=#>
            <div class="equip-expander-header sweep-btn">&nbsp;{{shell.ult_active_name}}</div>
          </a>
          <div class="equip-open-info hidden">
            <div style="padding-left:5px">
              <span class="ult-effect">{{{shell.ult_active}}}</span>
            </div>
          </div>
        </td>
      </tr>
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
    {{#systems}}
      <tr>
        <td width="20%"><a href=#>
            <div class="btn mount-btn">SYSTEM</div>
          </a></td>
        <td class="menu-border equip-expander">
          <a href=#>
            <div class="equip-expander-header sweep-btn">&nbsp;{{name}}
              <span class="subtitle">({{source}})</span>
              {{#if sp}}<span class="pull-right subtitle">{{sp}} SP</span>{{/if}}
            </div>
          </a>
          <div class="equip-open-info hidden">
            <div style="padding-left:5px">
              {{#if description}}<blockquote class="desc-text">{{{description}}}</blockquote>{{/if}}
              <span>{{type}}</span>
              <span class="subtitle"><br>{{sp}} SP </span>
              {{#if effect}}<span><br>{{{effect}}}</span>{{/if}}
              <div class="tag-div">
                {{#tags}}
                  <span class="tag"><a href="#" data-balloon-length="{{balloonSize description}}" data-balloon="{{description}}" data-balloon-pos="up">{{name}}</a></span>
                {{/tags}}
              </div>
            </div>
          </div>
        </td>
      </tr>
    {{/systems}}
  </table>
  <table width="100%">
    <tr>
      <td width="66%"></td>
      <td>
        <!--div class="menu-border warning-stripes disabled" style="text-align: center">
          Add System <span class="pull-right subtitle"><b>7/7SP</b></span>
        </div-->
      </td>
    </tr>
  </table>
</div>
</script>

<script id="mech-report-template" type="text/template">

</script>


<div class="main-scroll">
  <div id="mech-info-output"></div>
  <br>
  <hr>
  <div id="mech-stats-output"></div>       
  <br>
  <hr>
  <div id="mech-gear-output"></div>
  <hr>
  <div style="padding: 20px;">
    <table class="mech-table">
      <tr>
        <th>
          Damage by: 
          <select class="chart-selector">
            <option value="range">Range</option>
            <option value="type">Type</option>
            <option value="mount">Mount</option>
          </select>
        </th>
        <th>Role Aptitude</th>
      </tr>
      <tr>
        <td style="padding: 10px;">
          <canvas id="damage-range-chart" height="200"></canvas>
          <canvas id="damage-type-chart" class='hidden' height="200"></canvas>
          <canvas id="damage-mount-chart" class='hidden' height="200"></canvas>
        </td>
        <td style="padding: 10px;" width=40%;>
          <canvas id="rolechart" height="200"></canvas>
        </td>
      </tr>
    </table>
  </div>
  <div style="padding: 20px;">
    <table width="100%">
      <tr>
        <td width=30%><a href=#>
            <div class="menu-border btn disabled" style="text-align: center;">Edit Configuration</div>
          </a></td>
        <td witdth="3.333%">&nbsp;</td>
        <td width=30%><a href=#>
            <div class="menu-border btn disabled" style="text-align: center">Print Configuration</div>
          </a></td>
        <td witdth="3.333%">&nbsp;</td>
        <td width=30%><a href=#>
            <div class="menu-border btn disabled" style="text-align: center">Delete Configuration</div>
          </a></td>
      </tr>
    </table>
  </div>
</div>

<div id="shell-info-modal-output"></div>

<script id="shell-info-modal-template" type="text/template">
<!-- SHELL INFO modal -->
<div id="shellInfoModal" class="modal">
  <div class="modal-content">
    <div class="modal-header">
      <span class="close close-x" data-modal="shellInfoModal">&times;</span>
      <span>{{source}} {{name}}</span>
    </div>
    <div class="modal-body">
      <br>
      <div id="shell-info">
        {{{description}}}
        <br>
        <span class="close pull-right menu-border btn" data-modal="shellInfoModal">&emsp;Close&emsp;</span>
        <br><br>
      </div>
    </div>
  </div>
</div>
</script>
